

<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	  <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1">
        <title>RPMS
		</title>
	    <!-- Bootstrap CSS -->
        <link rel="stylesheet" href="/css/bootstrap.min.css">
	    <!----css3---->
        <link rel="stylesheet" href="/css/custom.css">
		<!-- SLIDER REVOLUTION 4.x CSS SETTINGS -->
	
	<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700;900&display=swap" rel="stylesheet">

	
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
<link href="/css/bootstrap.min.css" rel="stylesheet">
<link href="src/styles.css" rel="stylesheet">
	
	<!--google material icon-->
        <link href="https://fonts.googleapis.com/css2?family=Material+Icons"
      rel="stylesheet">


      <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
      <style>
.comment-box {
  display: none;
}

.card {
      width: 18rem;
      margin-bottom: 20px;
      margin-top: 2rem;
    }

    .property-details {
      display: none;
    }

    .likes-dislikes-container {
      display: flex;
      gap: 5rem;
      align-items: center;
    }

    .likes {
      margin-top: 10px;
      margin-bottom: 10px;
    }

    .card-img-top {
      border-radius: 3%;
      height: 200px;
      width: 100%;
      align-content: center;
      align-self: center;
      border-top: 1rem;
      margin-top: 0rem;
    }

    .custom-blockquote {
      border-left: 5px solid #007bff;
      padding-left: 20px;
      margin: 20px 0;
      background-color: #f8f9fa;
      font-size: large;
      font-family: Verdana, Geneva, Tahoma, sans-serif;
      font-weight: bold;
      font-style: italic;
    }

   
    .container-fluid{
        width:100%;
	z-index:9;
	position:relative;
      
    }
</style>

  </head>
  <body>
  



<div class="wrapper">


<div class="body-overlay"></div>


        <!-- Sidebar  -->
        <nav id="sidebar">
            <div class="sidebar-header">
                <h3><img src="/images/house.png" class="img-fluid"/><span>RPMS</span></h3>
            </div>
            <ul class="list-unstyled components">
			<li  class="active">
                    <a href="#" class="dashboard"><i class="material-icons">dashboard</i><span>Dashboard</span></a>
                </li>
		
		      <div class="small-screen navbar-display">
                <li class="dropdown d-lg-none d-md-block d-xl-none d-sm-block">
                    <a href="#homeSubmenu0" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">
					<i class="material-icons">notifications</i><span> 4 notification</span></a>
                    <ul class="collapse list-unstyled menu" id="homeSubmenu0">
                                    <li>
                                    <a href="#">You have 5 new messages</a>
                                    </li>
                                    <li>
                                        <a href="#">landlord, allan added new property</a>
                                    </li>
                                    <li>
                                        <a href="#">new lease request!</a>
                                    </li>
                                    <li>
                                        <a href="#">5 warnings in Server Console</a>
                                    </li>
                    </ul>
                </li>
				
				<li  class="d-lg-none d-md-block d-xl-none d-sm-block">
                    <a href="#"><i class="material-icons">apps</i><span>apps</span></a>
                </li>
				
				 <li  class="d-lg-none d-md-block d-xl-none d-sm-block">
                    <a href="#"><i class="material-icons">person</i><span>user</span></a>
                </li>
				
				<li  class="d-lg-none d-md-block d-xl-none d-sm-block">
                    <a href="#"><i class="material-icons">settings</i><span>setting</span></a>
                </li>
				</div>
			
			
                <li class="dropdown">
                    <a href="#homeSubmenu1" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">
					<i class="material-icons">add-business</i><span>Properties</span></a>
                    <ul class="collapse list-unstyled menu" id="homeSubmenu1">
                       
                        <li>
                            <a href="#">View  Most popular properties</a>
                        </li>
                    </ul>
                </li>
                
				
			   
               
            </ul>

           
        </nav>
		
		

        <!-- Page Content  -->
        <div id="content">
		
		<div class="top-navbar">
            <nav class="navbar navbar-expand-lg">
                <div class="container-fluid">

                    <button type="button" id="sidebarCollapse" class="d-xl-block d-lg-block d-md-mone d-none">
                        <span class="material-icons">arrow_back_ios</span>
                    </button>
					
					<a class="navbar-brand" href="#"> <%= message %></a>
					
                    <button class="d-inline-block d-lg-none ml-auto more-button" type="button" data-toggle="collapse"
					data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="material-icons">more_vert</span>
                    </button>

                    <div class="collapse navbar-collapse d-lg-block d-xl-block d-sm-none d-md-none d-none" id="navbarSupportedContent">
                        <ul class="nav navbar-nav ml-auto"> 
                            <li class="nav-item">
                                <a class="nav-link" href="#">
                                  <span class="material-icons">person</span>
                                  <span><%= username %></span>
                                </a>
                              </li>
                            <li class="nav-item">
                                <a class="nav-link" href="/logout">Logout</a>
                              </li>  
                            <li class="dropdown nav-item active">
                                <a href="#" class="nav-link" data-toggle="dropdown">
                                   <span class="material-icons">notifications</span>
								   <span class="notification">4</span>
                               </a>
                                <ul class="dropdown-menu">
                                    <li>
                                        <a href="#">You have 5 new messages</a>
                                    </li>
                                    <li>
                                        <a href="#">land lord allan , added new property</a>
                                    </li>                                    
                                    
                                </ul>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#">
								<span class="material-icons">apps</span>
								</a>
                            </li>
                            <!--
                            <li class="nav-item">
                                <a class="nav-link" href="#">
								<span class="material-icons">person</span>
								</a>
                                </li>
                            -->
							<li class="nav-item">
                                <a class="nav-link" href="#">
								<span class="material-icons">settings</span>
								</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </nav>
	    </div>
			



<!-- main content-->
<div class="container-fluid">    
   
    <div id="" class="">
      <blockquote class="custom-blockquote">
        <p>
          Our platform is designed to streamline the rental process
          and provide you with a seamless experience.
          Feel free to explore the features and functionalities
          we have to offer, and don't hesitate to reach out
          to our support team if you have any questions or need assistance.
          Thank you for choosing our Rental Property Management System,
          and we hope you have a fantastic experience managing your rentals!
        </p>
      <div class="row">
        <div class="col-md-12">
          <div class="card-columns" id="propertyList">
            <% Properties.forEach(function(property) { %>
              <div class="card">
                <% if (property.photos && property.photos.length > 0) { %>
                    <img src="/<%= property.photos %>" class="card-img-top" alt="Property Photo">
                <% } else { %>
                  <div class="no-image-placeholder">
                    No Image Available
                  </div>
                <% } %>
                <div class="card-body">
                  <h5 class="card-title"><%= property.property_name %></h5>
                  <p class="card-text">Type: <%= property.property_type %></p>
                  <button class="btn btn-primary view-more-button" data-target="<%= property._id %>">View More</button>
                  <div class="property-details" id="<%= property._id %>">
                    <p><strong>Location:</strong> <%= property.location %></p>
                    <p><strong>Description:</strong> <%= property.description %></p>
                    <p><strong>Bedrooms:</strong> <%= property.bedrooms %></p>
                    <p><strong>Bathrooms:</strong> <%= property.bathrooms %></p>
                    <p><strong>Cost:</strong> <%= property.cost %></p>
                  </div>
                  <div class="likes-dislikes-container">
                    <div class="likes">
                      <div class="icon-container">
                        <svg class="bi bi-heart" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                          <path fill-rule="evenodd"
                            d="M8 14.418l-.677-.646C3.356 10.77 1 8.3 1 5.4 1 2.42 3.239 0 6 0c1.582 0 3.055.823 4 2 .945-1.177 2.418-2 4-2 2.761 0 5 2.42 5 5.4 0 2.9-2.356 5.37-6.323 8.372L8 14.418z" />
                        </svg>
                        <span class="like-count"><%= property.likes %></span>
                      </div>
                    </div>
                    <div class="dislikes">
                      <div class="icon-container">
                        <svg class="bi bi-thumbs-down" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                          <path
                            d="M1 11.268c0 .427.256.74.608.74.14 0 .28-.036.424-.11l10.032-4.972c.107-.048.203-.117.287-.204a1.135 1.135 0 0 0 .377-.857V5.13c0-.427-.256-.74-.608-.74a.994.994 0 0 0-.424.11l-3.135 1.555L7.06 2.01a1.03 1.03 0 0 0-1.47-.032L1.033 5.888A.994.994 0 0 0 .61 6.628c-.352 0-.608-.313-.608-.74V2.33c0-.427-.256-.74-.608-.74C0 1.59 0 1.57 0 1.57v8.756s0 .02 0 .074zm2.4-8.648a.964.964 0 0 1 .294-.036c.273 0 .467.234.467.56v5.4c0 .427.256.74.608.74.14 0 .28-.036.424-.11l3.135-1.555 2.474 2.44a.98.98 0 0 0 1.43.036l3.468-3.52a.964.964 0 0 1 .294-.036c.273 0 .467.234.467.56v2.457c0 .427.256.74.608.74.14 0 .28-.036.424-.11L16 6.383v2.39c0 .427.256.74.608.74.14 0 .28-.036.424-.11l2-1c.218-.109.368-.34.368-.6V2.3a.6.6 0 0 0-.6-.6.6.6 0 0 0-.6.6v2.472c0 .193-.117.373-.294.427a.67.67 0 0 1-.706-.166L13 2.965v2.39c0 .427.256.74.608.74.14 0 .28-.036.424-.11l2-1c.218-.109.368-.34.368-.6V1.57c0-.02-.005-.04-.013-.056a.539.539 0 0 0-.152-.23L10.066.051A1.13 1.13 0 0 0 9.78 0c-.3 0-.546.313-.546.74v3.9c0 .427.256.74.608.74.14 0 .28-.036.424-.11L12 3.656l2.474 2.44a.98.98 0 0 0 1.43.036l3.468-3.52a.964.964 0 0 1 .294-.036c.273 0 .467.234.467.56v2.457c0 .427.256.74.608.74.14 0 .28-.036.424-.11l2-1c.218-.109.368-.34.368-.6V1.57c0-.02-.005-.04-.013-.056a.539.539 0 0 0-.152-.23L14.066.051A1.13 1.13 0 0 0 13.78 0c-.3 0-.546.313-.546.74v1.2l-10.6 5.247v-5.92z" />
                        </svg>
                        <span class="dislike-count"><%= property.dislikes %></span>
                      </div>
                    </div>
                  </div>
                  <button class="btn btn-primary like-button"
                    onclick="handleLike('<%= property._id %>')">Like</button>
                  <button class="btn btn-primary liked-button" style="display: none;"
                    onclick="handleLike('<%= property._id %>')">Liked</button>
                  <button class="btn btn-danger"
                    onclick="handleDislike('<%= property._id %>')">Dislike</button>
                  <button class="btn btn-primary comment-btn">Comment</button>
                  <div class="comment-box" id="commentBox_<%= property._id %>">
                    <textarea class="form-control" rows="3" placeholder="Enter your comment"></textarea>
                    <button class="btn btn-primary post-comment-btn" onclick="postComment('<%= property._id %>')">Post Comment</button>
                  </div>
                </div>
              </div>
            <% }) %>
          </div>
        </div>
      </div>
    </div>
  
<br />
  
  <br />
	
<footer class="footer">
    <div class="container-fluid">
      <div class="row">
      <div class="col-md-6">
        <nav class="d-flex">
            <ul class="m-0 p-0">
                <li>
                    <a href="#">
                        Home
                    </a>
                </li>
                <li>
                    <a href="#">
                        Company
                    </a>
                </li>
                <li>
                    <a href="#">
                        Portfolio
                    </a>
                </li>
                <li>
                    <a href="#">
                        Blog
                    </a>
                </li>
            </ul>
        </nav>
       
    </div>
    <div class="col-md-6">
     <p class="copyright d-flex justify-content-end"> &copy 2023 Design by
            <a href="#">Mpairwe lauben</a> Group assignment COCIS BSSE
        </p>
    </div>
      </div>
        </div>
</footer>
        
        </div>
        
    

</div>
</div>








<!-- Optional JavaScript -->
<!-- jQuery first, then Popper.js, then Bootstrap JS -->
<script src="/js/jquery-3.3.1.slim.min.js"></script>
<script src="/js/popper.min.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/jquery-3.3.1.min.js"></script>


<script type="text/javascript">
 // Handle view more button click
 $(document).on('click', '.view-more-button', function () {
      var targetId = $(this).data('target');
      $('#' + targetId).slideToggle();
    });

    // Handle like button click
    function handleLike(propertyId) {
      // Perform logic to handle like button click
      // ...

      var likeCount = $('#' + propertyId).find('.like-count');
      var likes = parseInt(likeCount.text());
      likes++;
      likeCount.text(likes);

      $('#' + propertyId).find('.like-button').hide();
      $('#' + propertyId).find('.liked-button').show();
    }

    // Handle dislike button click
    function handleDislike(propertyId) {
      // Perform logic to handle dislike button click
      // ...

      var likeCount = $('#' + propertyId).find('.like-count');
      var likes = parseInt(likeCount.text());
      likes--;
      likeCount.text(likes);

      $('#' + propertyId).find('.liked-button').hide();
      $('#' + propertyId).find('.like-button').show();
    }

    // Handle comment button click
    $(document).on('click', '.comment-btn', function () {
      var commentBox = $(this).siblings('.comment-box');
      commentBox.toggle();
    });

    // Handle post comment button click
    $(document).on('click', '.post-comment-btn', function () {
      var comment = $(this).siblings('textarea').val();
      // Perform the logic to post the comment to the server
      // ...
      // Display a success message or handle the response accordingly
    });

    // Function to post a comment
function postComment(propertyId) {
  const commentBox = document.querySelector(`#commentBox_${propertyId}`);
  const commentInput = commentBox.querySelector('textarea');
  const comment = commentInput.value.trim();

  if (comment !== '') {
    // Make an API request to post the comment for the given propertyId
    // You can use AJAX, fetch, or any other method to make the API request

    // Example using fetch:
    fetch('/api/properties/' + propertyId + '/comments', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({ userId: 'yourUserId', comment: comment }) // Replace 'yourUserId' with the actual user ID
    })
    .then(response => response.json())
    .then(data => {
      // Clear the comment input
      commentInput.value = '';

      // Update the UI to display the newly posted comment
      const commentList = commentBox.parentNode.querySelector('.comment-list');
      const newCommentElement = document.createElement('li');
      newCommentElement.textContent = data.comment;
      commentList.appendChild(newCommentElement);
    })
    .catch(error => {
      console.error('Error:', error);
    });
  }
}


</script>


<script src="script.js"></script>


</body>

</html>
